<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù„ÙˆØ­Ø© ØªØªØ¨Ø¹ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†Ùˆ</title>
  <style>
    :root{
      --clr-bg:#f4f5f7;
      --clr-card:#ffffff;
      --clr-card-edge:#e2e8f0;
      --clr-border:#cbd5e1;
      --clr-check:#10b981; /* Ø£Ø®Ø¶Ø± */
      --clr-stop:#ef4444;  /* Ø£Ø­Ù…Ø± */
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:"Cairo",sans-serif;
      background:var(--clr-bg);
      color:#0f172a;
      padding:0.75rem;
    }
    h1{margin:0 0 0.75rem;text-align:center;font-size:1.2rem;}/* Ø´Ø¨ÙƒØ© */
.grid{display:flex;flex-direction:column;gap:0.5rem;align-items:center;}
.row{display:flex;gap:0.5rem;justify-content:center;}

/* Ø§Ù„Ø¨Ù„Ø§Ø·Ø© */
.tile{
  width:clamp(42px,13vw,60px);
  aspect-ratio:1 / 1.6;
  background:linear-gradient(160deg,var(--clr-card) 0%,var(--clr-card-edge) 100%);
  border:1px solid var(--clr-border);
  border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
  position:relative;
  padding:2px 4px;
  display:flex;flex-direction:column;justify-content:space-between;align-items:center;
  user-select:none;cursor:pointer;
}
.tile:active{transform:scale(.97);}    
/* Ø¹Ù„Ø§Ù…Ø© */
.marker{
  position:absolute;top:2px;inset-inline-end:2px;
  width:9px;height:9px;border-radius:50%;background:transparent;pointer-events:none;
}

/* dots */
.dots{display:flex;flex-wrap:wrap;gap:2px;width:100%;height:45%;justify-content:center;align-content:center;}
.dot{width:4px;height:4px;background:#000;border-radius:50%;}

.divider{width:80%;height:1px;background:#6b7280;}

/* select */
select{
  width:100%;margin-top:2px;font-size:.58rem;
  background:#f1f5f9;border:1px solid var(--clr-border);border-radius:3px;color:#000;padding:1px 2px;
}

/* Ø§Ù„Ø¥Ø­ØµØ§Ø¡ */
.counterBox{
  margin-top:1rem;
  background:#ffffff;border:1px solid var(--clr-border);border-radius:8px;
  padding:0.5rem;max-width:320px;margin-inline:auto;box-shadow:0 2px 6px rgba(0,0,0,.05);
}
.counterBox h2{margin:0 0 0.5rem;text-align:center;font-size:.95rem;color:#0f172a;}
table{width:100%;border-collapse:collapse;font-size:.8rem;}
td{padding:3px 0;text-align:center;}
tr:nth-child(even) td{background:#f8fafc;}
#resetBtn{margin-top:8px;width:100%;padding:6px;border:none;border-radius:4px;background:#475569;color:#fff;font-size:.8rem;cursor:pointer;}
#resetBtn:hover{background:#334155;}

  </style>
</head>
<body>
  <h1>Ù„ÙˆØ­Ø© ØªØªØ¨Ø¹ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†Ùˆ</h1>
  <div class="grid" id="dominoGrid"></div>  <section class="counterBox">
    <h2>Ø§Ù„Ø¥Ø­ØµØ§Ø¡</h2>
    <table><tbody id="counterTable"></tbody></table>
    <button id="resetBtn">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
  </section>  <script>
    /* Ø¹Ù†Ø§ØµØ± DOM */
    const grid = document.getElementById('dominoGrid');
    const counterTable = document.getElementById('counterTable');
    const resetBtn = document.getElementById('resetBtn');

    /* Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨Ù„Ø§Ø·Ø§Øª */
    const tilesData = [];
    for(let top=0; top<=6; top++) for(let bottom=0; bottom<=top; bottom++) tilesData.push({top,bottom,id:`${bottom}-${top}`});

    /* Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø­Ø§Ù„Ø© Ù…Ø­ÙÙˆØ¸Ø© */
    const savedStates = JSON.parse(localStorage.getItem('dominoStates')||'{}');

    /* Ø±Ø³Ù… Ø§Ù„Ù†Ù‚Ø§Ø· */
    function createDots(n){
      const cnt=document.createElement('div');cnt.className='dots';
      for(let i=0;i<n;i++){const d=document.createElement('div');d.className='dot';cnt.appendChild(d);}return cnt;
    }

    /* Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ù„Ø§Ø·Ø© */
    function createTile(top,bottom,id){
      const tile=document.createElement('div');tile.className='tile';tile.dataset.id=id;
      const marker=document.createElement('span');marker.className='marker';tile.appendChild(marker);
      const topDots=createDots(top);const divider=document.createElement('div');divider.className='divider';const bottomDots=createDots(bottom);
      const select=document.createElement('select');
      select.innerHTML='<option value="unknown">â€”</option><option value="played">âœ…</option><option value="hand">ðŸ›‘</option>';
      tile.append(topDots,divider,bottomDots,select);

      /* Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø­Ø§Ù„Ø© */
      const initState=savedStates[id]||'unknown';select.value=initState;applyState(tile,initState);

      /* Ø£Ø­Ø¯Ø§Ø« */
      tile.addEventListener('click',e=>{if(e.target.tagName!=='SELECT')select.focus();});
      select.addEventListener('change',()=>{applyState(tile,select.value);saveStates();updateCounter();});
      return tile;
    }

    /* ØªØ·Ø¨ÙŠÙ‚ Ø­Ø§Ù„Ø© */
    function applyState(tile,state){
      const marker=tile.querySelector('.marker');
      if(state==='played') marker.style.background= 'var(--clr-check)';
      else if(state==='hand') marker.style.background='var(--clr-stop)';
      else marker.style.background='transparent';
    }

    /* Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ© */
    function buildGrid(){
      let currentTop=-1,row;
      tilesData.forEach(t=>{
        if(t.bottom!==currentTop){currentTop=t.bottom;row=document.createElement('div');row.className='row';grid.appendChild(row);} // ØµÙ Ø¬Ø¯ÙŠØ¯
        const tile=createTile(t.top,t.bottom,t.id);
        row.appendChild(tile);
      });
    }

    /* Ø­ÙØ¸ */
    function saveStates(){
      const states={};
      document.querySelectorAll('.tile').forEach(t=>{states[t.dataset.id]=t.querySelector('select').value;});
      localStorage.setItem('dominoStates',JSON.stringify(states));
    }

    /* Ø¥Ø­ØµØ§Ø¡ */
    function updateCounter(){
      const counts=Array(7).fill(0);
      document.querySelectorAll('.tile').forEach(t=>{
        const state=t.querySelector('select').value; if(state==='unknown'){
          const [a,b]=t.dataset.id.split('-').map(Number); counts[a]++; if(a!==b) counts[b]++; }
      });
      counterTable.innerHTML=counts.map((n,i)=>`<tr><td>Ø§Ù„Ø±Ù‚Ù… ${i}</td><td>${n} Ø¨Ø§Ù‚ÙŠ</td></tr>`).join('');
    }

    /* Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· */
    resetBtn.addEventListener('click',()=>{
      if(!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø·ØŸ'))return;
      document.querySelectorAll('.tile select').forEach(sel=>{sel.value='unknown';});
      document.querySelectorAll('.tile').forEach(t=>applyState(t,'unknown'));
      saveStates();updateCounter();
    });

    /* ØªÙ‡ÙŠØ¦Ø© */
    buildGrid(); updateCounter();
  </script></body>
</html>
