<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù„ÙˆØ­Ø© ØªØªØ¨Ù‘Ø¹ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†Ùˆ</title>
  <style>
    /* Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª */
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, sans-serif;
      background: #f4f4f4;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }header {
  padding: 1rem 1.5rem;
  background: #1e293b;
  color: #fff;
  text-align: center;
}

main {
  flex: 1;
  display: flex;
  gap: 1rem;
  padding: 1rem;
  box-sizing: border-box;
}

/* Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨Ù„Ø§Ø·Ø§Øª */
#dominoGrid {
  display: grid;
  grid-template-columns: repeat(4, 100px);
  grid-auto-rows: 200px;
  gap: 12px;
  justify-content: center;
  flex: 1;
}

.tile {
  width: 100px;
  height: 200px;
  border-radius: 8px;
  border: 2px solid #334155;
  background: #d4d4d4; /* Ù…Ø¬Ù‡ÙˆÙ„ */
  position: relative;
  cursor: pointer;
  transition: background 0.25s ease;
  user-select: none;
  display: flex;
  align-items: center;
  justify-content: center;
}

.tile.played {
  background: #a7f3d0; /* Ø£Ø®Ø¶Ø± Ø¨Ø§Ù‡Øª */
}

.tile.hand {
  background: #fecaca; /* Ø£Ø­Ù…Ø± Ø¨Ø§Ù‡Øª */
}

/* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
.state-select {
  position: absolute;
  bottom: 4px;
  inset-inline-start: 4px;
  width: 92px;
  display: none;
  font-size: 0.8rem;
}

.tile.show-select .state-select {
  display: block;
}

/* Ø§Ù„Ø¹Ø¯Ø§Ø¯ */
aside#counterBox {
  width: 160px;
  background: #ffffff;
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  padding: 1rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
  height: fit-content;
}

aside h2 {
  margin-top: 0;
  font-size: 1rem;
  text-align: center;
}

table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
}

table td {
  padding: 4px 0;
  text-align: center;
}

table tr:nth-child(even) td {
  background: #f1f5f9;
}

#resetBtn {
  margin-top: 12px;
  width: 100%;
  padding: 6px;
  border: none;
  border-radius: 4px;
  background: #475569;
  color: #fff;
  font-size: 0.9rem;
  cursor: pointer;
}

#resetBtn:hover {
  background: #334155;
}

  </style>
</head>
<body>
  <header>
    <h1>Ù„ÙˆØ­Ø© ØªØªØ¨Ù‘Ø¹ Ø§Ù„Ø¯ÙˆÙ…ÙŠÙ†Ùˆ</h1>
  </header>  <main>
    <!-- Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨Ù„Ø§Ø·Ø§Øª -->
    <section id="dominoGrid" aria-label="Ø´Ø¨ÙƒØ© Ø§Ù„Ø¨Ù„Ø§Ø·Ø§Øª"></section><!-- Ø§Ù„Ø¹Ø¯Ø§Ø¯ -->
<aside id="counterBox">
  <h2>Ø§Ù„Ø¥Ø­ØµØ§Ø¡</h2>
  <table>
    <tbody id="counterTable"></tbody>
  </table>
  <button id="resetBtn">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
</aside>

  </main>  <script>
    /* ---------- Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ---------- */
    const grid = document.getElementById("dominoGrid");
    const counterTable = document.getElementById("counterTable");
    const resetBtn = document.getElementById("resetBtn");

    // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø¨ÙƒÙ„ Ø§Ù„Ø¨Ù„Ø§Ø·Ø§Øª (a <= b) Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Double-Six
    const tilesData = [];
    for (let a = 0; a <= 6; a++) {
      for (let b = a; b <= 6; b++) {
        tilesData.push({ a, b, id: `${a}-${b}` });
      }
    }

    /* ---------- Ø±Ø³Ù… Ø§Ù„Ø¨Ù„Ø§Ø·Ø§Øª (SVG) ---------- */
    function dotPositions(value, offsetY = 0) {
      // Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø¯Ø§Ø¦Ø±ÙŠØ© Ù„Ù†ØµÙ Ø§Ù„Ø¨Ù„Ø§Ø·Ø© (Ø¹Ø±Ø¶ 100ØŒ Ø§Ø±ØªÙØ§Ø¹ 100)
      const pos = [
        [25, 25], // 0 top-left
        [50, 25], // 1 top-center
        [75, 25], // 2 top-right
        [25, 50], // 3 mid-left
        [50, 50], // 4 center
        [75, 50], // 5 mid-right
        [25, 75], // 6 bottom-left
        [50, 75], // 7 bottom-center
        [75, 75]  // 8 bottom-right
      ];

      // Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø­Ø³Ø¨ Ø§Ù„Ø±Ù‚Ù…
      const mapping = {
        0: [],
        1: [4],
        2: [0, 8],
        3: [0, 4, 8],
        4: [0, 2, 6, 8],
        5: [0, 2, 4, 6, 8],
        6: [0, 2, 3, 5, 6, 8]
      };

      return mapping[value].map(idx => {
        const [x, y] = pos[idx];
        return { cx: x, cy: y + offsetY };
      });
    }

    function generateTileSVG(a, b) {
      const circles = [
        ...dotPositions(a, 0),
        ...dotPositions(b, 100)
      ];

      const circlesMarkup = circles.map(c => `<circle cx="${c.cx}" cy="${c.cy}" r="8" fill="black" />`).join("\n");

      return `
        <svg viewBox="0 0 100 200" width="100" height="200" xmlns="http://www.w3.org/2000/svg" aria-label="${a}|${b}">
          <rect x="1" y="1" width="98" height="198" rx="8" ry="8" fill="white" stroke="black" stroke-width="1.5" />
          <line x1="0" y1="100" x2="100" y2="100" stroke="black" stroke-width="2" />
          ${circlesMarkup}
        </svg>`;
    }

    /* ---------- Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ù„Ø§Ø·Ø§Øª ---------- */
    function buildTiles() {
      const saved = JSON.parse(localStorage.getItem("dominoStates") || "{}");

      tilesData.forEach(tile => {
        const div = document.createElement("div");
        div.className = "tile";
        div.innerHTML = generateTileSVG(tile.a, tile.b);
        div.dataset.id = tile.id;

        // Ù‚Ø§Ø¦Ù…Ø© Ù…Ù†Ø³Ø¯Ù„Ø©
        const select = document.createElement("select");
        select.className = "state-select";
        select.innerHTML = `
          <option value="unknown">â” ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ</option>
          <option value="played">âœ… Ù†Ø²Ù„Øª</option>
          <option value="hand">ğŸ›‘ ÙÙŠ Ø¥ÙŠØ¯ÙŠ</option>`;

        div.appendChild(select);
        grid.appendChild(div);

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
        const initState = saved[tile.id] || "unknown";
        select.value = initState;
        applyState(div, initState);

        // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ù„Ø§Ø·Ø©: Ø¥Ø¸Ù‡Ø§Ø± / Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        div.addEventListener("click", e => {
          // Ù„Ø§ ØªØºÙ„Ù‚ Ù„Ùˆ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù€select Ù†ÙØ³Ù‡
          if (e.target.tagName.toLowerCase() === "select") return;
          div.classList.toggle("show-select");
        });

        // Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
        select.addEventListener("change", () => {
          applyState(div, select.value);
          saveStates();
          updateCounter();
        });
      });
    }

    /* ---------- ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ù„Ø§Ø·Ø© ---------- */
    function applyState(tileElement, state) {
      tileElement.classList.remove("played", "hand");
      if (state === "played") tileElement.classList.add("played");
      else if (state === "hand") tileElement.classList.add("hand");

      // Ø£Ù„ØºÙ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
      tileElement.classList.remove("show-select");
    }

    /* ---------- Ø­ÙØ¸ ÙˆØ§Ø³ØªØ¹Ø§Ø¯Ø© ---------- */
    function saveStates() {
      const states = {};
      document.querySelectorAll(".tile").forEach(t => {
        const select = t.querySelector("select");
        states[t.dataset.id] = select.value;
      });
      localStorage.setItem("dominoStates", JSON.stringify(states));
    }

    /* ---------- ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯ ---------- */
    function updateCounter() {
      // ØµÙØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª
      const counts = Array(7).fill(0);

      document.querySelectorAll(".tile").forEach(t => {
        const select = t.querySelector("select").value;
        if (select === "unknown") {
          const [a, b] = t.dataset.id.split("-").map(Number);
          counts[a]++;
          if (a !== b) counts[b]++;
        }
      });

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„
      counterTable.innerHTML = counts
        .map(
          (n, idx) => `
            <tr>
              <td>Ø§Ù„Ø±Ù‚Ù… ${idx}</td>
              <td>${n} Ø¨Ø§Ù‚ÙŠ</td>
            </tr>`
        )
        .join("\n");
    }

    /* ---------- Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· ---------- */
    resetBtn.addEventListener("click", () => {
      if (!confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø·ØŸ")) return;
      document.querySelectorAll(".tile").forEach(t => {
        const select = t.querySelector("select");
        select.value = "unknown";
        applyState(t, "unknown");
      });
      saveStates();
      updateCounter();
    });

    /* ---------- ØªÙ‡ÙŠØ¦Ø© ---------- */
    buildTiles();
    updateCounter();
  </script></body>
</html>
